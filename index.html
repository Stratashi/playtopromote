<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Play to Promote</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            min-height: 100vh;
            color: #fff;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        header { text-align: center; padding: 40px 20px; margin-bottom: 40px; }
        h1 { font-size: 3em; background: linear-gradient(45deg, #00d4ff, #8a2be2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        
        .login-page { display: flex; justify-content: center; align-items: center; min-height: 60vh; }
        .login-card { background: rgba(30, 30, 50, 0.95); border: 2px solid rgba(138, 43, 226, 0.5); border-radius: 20px; padding: 50px; text-align: center; max-width: 400px; }
        .login-card h2 { margin-bottom: 30px; font-size: 1.8em; color: #00d4ff; }
        
        .button-group { display: flex; flex-direction: column; gap: 15px; margin-top: 30px; }
        button { padding: 15px 30px; font-size: 1.1em; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; transition: all 0.3s ease; }
        .btn-primary { background: linear-gradient(45deg, #00d4ff, #0099cc); color: #000; }
        .btn-primary:hover { transform: translateY(-2px); }
        .btn-secondary { background: linear-gradient(45deg, #8a2be2, #5a0a92); color: #fff; }
        .btn-secondary:hover { transform: translateY(-2px); }
        
        .dashboard-page { display: none; }
        .dashboard-page.active { display: block; }
        
        .profile-header { display: flex; justify-content: space-between; align-items: center; background: rgba(30, 30, 50, 0.95); padding: 20px; border-radius: 15px; margin-bottom: 30px; border: 2px solid rgba(138, 43, 226, 0.3); }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 30px; }
        .stat-card { background: rgba(30, 30, 50, 0.95); border: 2px solid rgba(138, 43, 226, 0.3); padding: 20px; border-radius: 10px; text-align: center; }
        .stat-value { font-size: 2em; font-weight: bold; color: #00d4ff; margin-bottom: 5px; }
        .stat-label { color: #999; font-size: 0.9em; }
        
        .form-container { background: rgba(30, 30, 50, 0.95); border: 2px solid rgba(138, 43, 226, 0.5); border-radius: 20px; padding: 40px; max-width: 450px; margin: 30px auto; display: none; }
        .form-container.active { display: block; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: bold; color: #00d4ff; }
        .form-group input { width: 100%; padding: 12px; border: 2px solid rgba(138, 43, 226, 0.3); background: rgba(20, 20, 40, 0.8); color: #fff; border-radius: 8px; font-size: 1em; }
        .form-group input:focus { outline: none; border-color: #00d4ff; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéÆ Play to Promote</h1>
        </header>
        
        <!-- LOGIN PAGE -->
        <div id="login-page" class="login-page">
            <div class="login-card">
                <h2>Welcome!</h2>
                <p style="margin-bottom: 20px;">Choose how you want to play:</p>
                <div class="button-group">
                    <button class="btn-primary" id="quick-play-btn">‚ö° Quick Play</button>
                    <button class="btn-secondary" id="create-profile-btn">üë§ Create Profile</button>
                </div>
            </div>
        </div>
        
        <!-- PROFILE FORM -->
        <div id="form-container" class="form-container">
            <h2 style="text-align: center; margin-bottom: 30px; color: #00d4ff;">Create Profile</h2>
            <form id="profile-form">
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="username" placeholder="Username" required>
                </div>
                <div class="form-group">
                    <label>Promo Link</label>
                    <input type="url" id="promo-link" placeholder="https://your-link.com" required>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 30px;">
                    <button type="button" class="btn-secondary" id="cancel-btn">Cancel</button>
                    <button type="submit" class="btn-primary">Create</button>
                </div>
            </form>
        </div>
        
        <!-- DASHBOARD PAGE -->
        <div id="dashboard-page" class="dashboard-page">
            <div class="profile-header">
                <div>
                    <h3 id="username-display">Welcome!</h3>
                    <p id="link-display" style="color: #00d4ff; font-size: 0.9em;"></p>
                </div>
                <button class="btn-secondary" id="logout-btn" style="padding: 10px 20px;">Logout</button>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="credits">0</div>
                    <div class="stat-label">Credits</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="score">0</div>
                    <div class="stat-label">Score</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="wins">0</div>
                    <div class="stat-label">Wins</div>
                </div>
            </div>
            
            <button class="btn-primary" id="find-game-btn" style="width: 100%; padding: 20px; margin: 20px 0;">üéÆ Find Game</button>
            
            <div id="games-section" style="display: none; margin-top: 40px;">
                <h3 style="margin-bottom: 20px; color: #00d4ff;">Select a Game:</h3>
                <div class="stats-grid">
                    <button class="btn-secondary" style="padding: 30px 20px; cursor: pointer;">
                        <div style="font-size: 2em; margin-bottom: 10px;">‚ùì</div>
                        <div>Trivia</div>
                    </button>
                    <button class="btn-secondary" style="padding: 30px 20px; cursor: pointer;">
                        <div style="font-size: 2em; margin-bottom: 10px;">‚ö°</div>
                        <div>Reaction</div>
                    </button>
                    <button class="btn-secondary" style="padding: 30px 20px; cursor: pointer;">
                        <div style="font-size: 2em; margin-bottom: 10px;">üé≤</div>
                        <div>Number</div>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBX0lxB7NZVMZftkB-T1jp9PfqNkQQHtXg",
            authDomain: "playtopromote.firebaseapp.com",
            projectId: "playtopromote",
            storageBucket: "playtopromote.firebasestorage.app",
            messagingSenderId: "947196888409",
            appId: "1:947196888409:web:7c3792b6fe34b238a17848"
        };
        
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        
        let currentUser = null;
        let currentUsername = "";
        let currentLink = "";
        let userStats = { credits: 0, score: 0, wins: 0 };
        
        const quickPlayBtn = document.getElementById('quick-play-btn');
        const createProfileBtn = document.getElementById('create-profile-btn');
        const profileForm = document.getElementById('profile-form');
        const cancelBtn = document.getElementById('cancel-btn');
        const logoutBtn = document.getElementById('logout-btn');
        const findGameBtn = document.getElementById('find-game-btn');
        
        const loginPage = document.getElementById('login-page');
        const formContainer = document.getElementById('form-container');
        const dashboardPage = document.getElementById('dashboard-page');
        
        quickPlayBtn.addEventListener('click', quickPlay);
        createProfileBtn.addEventListener('click', () => {
            loginPage.style.display = 'none';
            formContainer.classList.add('active');
        });
        cancelBtn.addEventListener('click', () => {
            formContainer.classList.remove('active');
            loginPage.style.display = 'flex';
        });
        profileForm.addEventListener('submit', createProfile);
        logoutBtn.addEventListener('click', logout);
        findGameBtn.addEventListener('click', () => {
            document.getElementById('games-section').style.display = document.getElementById('games-section').style.display === 'none' ? 'block' : 'none';
        });
        
        window.addEventListener('DOMContentLoaded', () => {
            const saved = localStorage.getItem('ptpUser');
            if (saved) {
                const user = JSON.parse(saved);
                currentUser = user;
                currentUsername = user.username;
                currentLink = user.link;
                userStats = user.stats || userStats;
                showDashboard();
            }
        });
        
        async function quickPlay() {
            try {
                const result = await auth.signInAnonymously();
                currentUser = { uid: result.user.uid };
                currentUsername = `Player_${Math.random().toString(36).substr(2, 9)}`;
                currentLink = "https://playtopromote.com";
                showDashboard();
            } catch (error) {
                alert('Error: ' + error.message);
            }
        }
        
        async function createProfile(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const link = document.getElementById('promo-link').value;
            
            try {
                const result = await auth.signInAnonymously();
                const uid = result.user.uid;
                currentUser = { uid: uid };
                currentUsername = username;
                currentLink = link;
                
                await db.collection("users").doc(uid).set({
                    username, link, uid, score: 0, credits: 0, wins: 0, createdAt: new Date()
                });
                
                localStorage.setItem('ptpUser', JSON.stringify({ uid, username, link, stats: userStats }));
                showDashboard();
            } catch (error) {
                alert('Error: ' + error.message);
            }
        }
        
        function showDashboard() {
            loginPage.style.display = 'none';
            formContainer.classList.remove('active');
            dashboardPage.classList.add('active');
            
            document.getElementById('username-display').textContent = `üëã ${currentUsername}`;
            document.getElementById('link-display').textContent = currentLink;
            document.getElementById('credits').textContent = userStats.credits;
            document.getElementById('score').textContent = userStats.score;
            document.getElementById('wins').textContent = userStats.wins;
        }
        
        function logout() {
            localStorage.removeItem('ptpUser');
            currentUser = null;
            dashboardPage.classList.remove('active');
            loginPage.style.display = 'flex';
            document.getElementById('username').value = '';
            document.getElementById('promo-link').value = '';
        }
    </script>
</body>
</html>
