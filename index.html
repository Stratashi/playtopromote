<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Play to Promote - Win Games, Get Traffic</title>
  <style>
    :root {
      --cyber-dark: #0a0a1a;
      --cyber-darker: #050510;
      --neon-cyan: #00ffff;
      --neon-magenta: #ff00ff;
      --neon-orange: #ff6600;
      --neon-green: #00ff88;
      --cyber-card: rgba(20, 20, 40, 0.95);
    }
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--cyber-dark);
      color: white;
      line-height: 1.6;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    /* LANDING */
    .landing {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 40px 20px;
      background: linear-gradient(180deg, var(--cyber-dark) 0%, var(--cyber-darker) 100%);
    }
    
    .hero-title {
      font-size: 56px;
      font-weight: bold;
      color: var(--neon-cyan);
      text-shadow: 0 0 20px rgba(0, 255, 255, 0.8);
      margin-bottom: 20px;
    }
    
    .hero-subtitle {
      font-size: 24px;
      color: var(--neon-magenta);
      margin-bottom: 40px;
    }
    
    .how-it-works {
      background: var(--cyber-card);
      border: 2px solid var(--neon-cyan);
      border-radius: 12px;
      padding: 32px;
      margin: 32px 0;
      max-width: 600px;
      text-align: left;
    }
    
    .how-it-works h3 {
      color: var(--neon-cyan);
      margin-bottom: 20px;
      font-size: 24px;
    }
    
    .how-it-works ul {
      list-style: none;
    }
    
    .how-it-works li {
      padding: 12px 0;
      font-size: 18px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .how-it-works li:last-child {
      border-bottom: none;
    }
    
    .how-it-works li::before {
      content: '‚úì ';
      color: var(--neon-green);
      font-weight: bold;
      margin-right: 8px;
    }
    
    .btn {
      padding: 16px 48px;
      font-size: 20px;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 1px;
      transition: all 0.3s;
    }
    
    .btn-primary {
      background: var(--neon-orange);
      color: var(--cyber-dark);
      border: 2px solid var(--neon-orange);
      box-shadow: 0 0 30px rgba(255, 102, 0, 0.6);
    }
    
    .btn-primary:hover {
      background: transparent;
      color: var(--neon-orange);
      transform: translateY(-4px);
      box-shadow: 0 0 50px rgba(255, 102, 0, 0.8);
    }
    
    .btn-secondary {
      background: transparent;
      color: var(--neon-cyan);
      border: 2px solid var(--neon-cyan);
    }
    
    .btn-secondary:hover {
      background: rgba(0, 255, 255, 0.1);
      transform: translateY(-2px);
    }
    
    /* ENTRY FORM */
    .entry-section {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px 20px;
    }
    
    .entry-card {
      background: var(--cyber-card);
      border: 3px solid var(--neon-orange);
      border-radius: 12px;
      padding: 48px;
      max-width: 600px;
      width: 100%;
      box-shadow: 0 0 60px rgba(255, 102, 0, 0.4);
    }
    
    .entry-card h2 {
      color: var(--neon-orange);
      text-align: center;
      margin-bottom: 32px;
      font-size: 32px;
    }
    
    .form-group {
      margin-bottom: 24px;
    }
    
    .form-label {
      display: block;
      color: white;
      font-weight: 500;
      margin-bottom: 8px;
      font-size: 16px;
    }
    
    .form-input {
      width: 100%;
      padding: 16px;
      background: rgba(0, 0, 0, 0.5);
      border: 2px solid rgba(0, 255, 255, 0.3);
      border-radius: 8px;
      color: white;
      font-size: 16px;
    }
    
    .form-input:focus {
      outline: none;
      border-color: var(--neon-cyan);
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.4);
    }
    
    .form-help {
      font-size: 14px;
      color: rgba(255, 255, 255, 0.6);
      margin-top: 8px;
    }
    
    /* GAME SELECTION */
    .games-section {
      min-height: 100vh;
      padding: 80px 20px;
    }
    
    .games-header {
      text-align: center;
      margin-bottom: 48px;
    }
    
    .games-header h2 {
      font-size: 48px;
      color: var(--neon-cyan);
      text-shadow: 0 0 20px rgba(0, 255, 255, 0.6);
      margin-bottom: 16px;
    }
    
    .user-greeting {
      font-size: 20px;
      color: var(--neon-magenta);
      margin-bottom: 16px;
    }
    
    .user-stats {
      display: flex;
      justify-content: center;
      gap: 32px;
      margin-top: 24px;
      flex-wrap: wrap;
    }
    
    .stat {
      text-align: center;
    }
    
    .stat-value {
      font-size: 36px;
      font-weight: bold;
      color: var(--neon-cyan);
    }
    
    .stat-label {
      font-size: 14px;
      color: rgba(255, 255, 255, 0.7);
    }
    
    .games-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      margin-bottom: 48px;
    }
    
    .game-card {
      background: var(--cyber-card);
      border: 2px solid var(--neon-cyan);
      border-radius: 12px;
      padding: 32px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .game-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 0 40px rgba(0, 255, 255, 0.5);
      border-color: var(--neon-magenta);
    }
    
    .game-icon {
      font-size: 64px;
      margin-bottom: 16px;
    }
    
    .game-name {
      font-size: 24px;
      font-weight: bold;
      color: var(--neon-cyan);
      margin-bottom: 12px;
    }
    
    .game-desc {
      color: rgba(255, 255, 255, 0.8);
      font-size: 16px;
    }
    
    /* ACTIVE GAME */
    .game-active {
      min-height: 100vh;
      padding: 80px 20px;
      text-align: center;
    }
    
    .game-header {
      margin-bottom: 32px;
    }
    
    .game-title {
      font-size: 42px;
      color: var(--neon-cyan);
      margin-bottom: 16px;
    }
    
    .game-timer {
      font-size: 32px;
      color: var(--neon-orange);
      font-weight: bold;
      margin-bottom: 16px;
    }
    
    .game-instruction {
      font-size: 18px;
      color: rgba(255, 255, 255, 0.8);
    }
    
    .game-area {
      max-width: 800px;
      margin: 0 auto;
      background: var(--cyber-card);
      border: 3px solid var(--neon-cyan);
      border-radius: 12px;
      padding: 48px;
      min-height: 400px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    
    .players-live {
      margin-top: 32px;
      padding: 16px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 8px;
    }
    
    .players-live h4 {
      color: var(--neon-magenta);
      margin-bottom: 12px;
    }
    
    /* WINNER SCREEN */
    .winner-section {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 40px 20px;
      text-align: center;
    }
    
    .winner-title {
      font-size: 56px;
      font-weight: bold;
      color: var(--neon-green);
      text-shadow: 0 0 40px rgba(0, 255, 136, 1);
      margin-bottom: 32px;
      animation: pulse 2s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    .winner-link-box {
      background: rgba(255, 102, 0, 0.15);
      border: 4px solid var(--neon-orange);
      border-radius: 12px;
      padding: 48px;
      margin: 32px 0;
      max-width: 800px;
      width: 100%;
      box-shadow: 0 0 80px rgba(255, 102, 0, 0.6);
    }
    
    .winner-name {
      font-size: 42px;
      font-weight: bold;
      color: var(--neon-cyan);
      margin-bottom: 24px;
    }
    
    .huge-link {
      font-size: 32px;
      font-weight: bold;
      color: var(--neon-magenta);
      text-decoration: none;
      word-break: break-all;
      display: block;
      margin: 24px 0;
      padding: 24px;
      background: rgba(255, 0, 255, 0.1);
      border: 2px solid var(--neon-magenta);
      border-radius: 8px;
      transition: all 0.3s;
    }
    
    .huge-link:hover {
      background: rgba(255, 0, 255, 0.2);
      transform: scale(1.02);
      box-shadow: 0 0 40px rgba(255, 0, 255, 0.8);
    }
    
    .auto-open-msg {
      color: var(--neon-green);
      font-size: 20px;
      margin-top: 16px;
      animation: blink 1.5s ease-in-out infinite;
    }
    
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .final-scores {
      margin: 32px 0;
      max-width: 600px;
      width: 100%;
    }
    
    .final-scores h3 {
      color: var(--neon-cyan);
      margin-bottom: 16px;
    }
    
    .score-item {
      padding: 16px;
      margin: 12px 0;
      background: var(--cyber-card);
      border: 2px solid var(--neon-cyan);
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .score-item.winner {
      border-color: var(--neon-green);
      background: rgba(0, 255, 136, 0.1);
    }
    
    /* LEADERBOARD */
    .leaderboard-section {
      padding: 80px 20px;
      background: var(--cyber-darker);
      border-top: 2px solid var(--neon-cyan);
    }
    
    .leaderboard-section h2 {
      text-align: center;
      font-size: 48px;
      color: var(--neon-cyan);
      text-shadow: 0 0 20px rgba(0, 255, 255, 0.6);
      margin-bottom: 48px;
    }
    
    .leaderboard-list {
      max-width: 900px;
      margin: 0 auto;
    }
    
    .leaderboard-item {
      display: grid;
      grid-template-columns: 80px 1fr 120px 120px 120px;
      gap: 16px;
      align-items: center;
      background: var(--cyber-card);
      padding: 20px;
      margin-bottom: 12px;
      border-radius: 8px;
      border: 2px solid rgba(0, 255, 255, 0.3);
      transition: all 0.3s;
    }
    
    .leaderboard-item:hover {
      border-color: var(--neon-cyan);
      transform: translateX(8px);
      box-shadow: 0 0 30px rgba(0, 255, 255, 0.3);
    }
    
    .lb-rank {
      font-size: 28px;
      font-weight: bold;
      color: var(--neon-orange);
      text-align: center;
    }
    
    .lb-username {
      font-size: 18px;
      font-weight: bold;
      color: white;
    }
    
    .lb-link {
      color: var(--neon-cyan);
      text-decoration: none;
      font-size: 14px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    
    .lb-link:hover {
      text-decoration: underline;
    }
    
    .lb-stat {
      text-align: center;
      font-weight: bold;
      color: var(--neon-green);
    }
    
    /* FOOTER */
    .footer {
      background: var(--cyber-dark);
      border-top: 2px solid var(--neon-magenta);
      padding: 60px 20px 40px;
    }
    
    .jeff-promo {
      max-width: 800px;
      margin: 0 auto;
      background: var(--cyber-card);
      border: 3px solid var(--neon-magenta);
      border-radius: 12px;
      padding: 48px;
      text-align: center;
      box-shadow: 0 0 60px rgba(255, 0, 255, 0.4);
    }
    
    .jeff-badge {
      display: inline-block;
      background: var(--neon-orange);
      color: var(--cyber-dark);
      padding: 8px 24px;
      border-radius: 20px;
      font-weight: bold;
      margin-bottom: 24px;
      font-size: 14px;
    }
    
    .jeff-title {
      font-size: 42px;
      color: var(--neon-magenta);
      margin-bottom: 16px;
      text-shadow: 0 0 30px rgba(255, 0, 255, 0.8);
    }
    
    .jeff-description {
      font-size: 18px;
      color: rgba(255, 255, 255, 0.9);
      margin-bottom: 32px;
      line-height: 1.6;
    }
    
    .jeff-link {
      display: inline-block;
      padding: 16px 48px;
      background: var(--neon-magenta);
      color: white;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
      font-size: 18px;
      transition: all 0.3s;
    }
    
    .jeff-link:hover {
      transform: scale(1.05);
      box-shadow: 0 0 40px rgba(255, 0, 255, 0.8);
    }
    
    .footer-bottom {
      text-align: center;
      margin-top: 40px;
      padding-top: 24px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      color: rgba(255, 255, 255, 0.5);
      font-size: 14px;
    }
    
    /* UTILITY */
    .hidden { display: none; }
    
    .menu-btn {
      position: fixed;
      top: 20px;
      left: 20px;
      padding: 12px 24px;
      background: var(--cyber-card);
      border: 2px solid var(--neon-cyan);
      color: var(--neon-cyan);
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      z-index: 1000;
    }
    
    .menu-btn:hover {
      background: rgba(0, 255, 255, 0.1);
    }
    
    /* RESPONSIVE */
    @media (max-width: 768px) {
      .hero-title { font-size: 36px; }
      .hero-subtitle { font-size: 18px; }
      .how-it-works li { font-size: 16px; }
      .games-grid { grid-template-columns: 1fr; }
      .leaderboard-item {
        grid-template-columns: 1fr;
        text-align: center;
        gap: 8px;
      }
      .lb-link { white-space: normal; }
      .winner-title { font-size: 36px; }
      .huge-link { font-size: 20px; }
    }
  </style>
</head>
<body>

  <!-- LANDING PAGE -->
  <section id="landingPage" class="landing">
    <div class="container">
      <h1 class="hero-title">Play to Promote</h1>
      <p class="hero-subtitle">Play games. Win. Get real traffic for your link.</p>
      
      <div class="how-it-works">
        <h3>How It Works:</h3>
        <ul>
          <li>Enter your link and username</li>
          <li>Play games against real players</li>
          <li>Winner's link opens automatically to everyone</li>
        </ul>
      </div>
      
      <button class="btn btn-primary" onclick="showEntry()">Start Playing</button>
    </div>
  </section>

  <!-- ENTRY FORM -->
  <section id="entryPage" class="entry-section hidden">
    <div class="entry-card">
      <h2>üéÆ Join the Game</h2>
      <form onsubmit="submitEntry(event)">
        <div class="form-group">
          <label class="form-label">Your Username</label>
          <input type="text" id="username" class="form-input" placeholder="Enter username" minlength="3" maxlength="20" required>
          <p class="form-help">3-20 characters</p>
        </div>
        
        <div class="form-group">
          <label class="form-label">Your Promotional Link</label>
          <input type="url" id="promoLink" class="form-input" placeholder="https://your-link.com" required>
          <p class="form-help">Your comic, shop, portfolio - any link!</p>
        </div>
        
        <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 16px;">Join Game</button>
        <button type="button" class="btn btn-secondary" onclick="showLanding()" style="width: 100%; margin-top: 16px;">Back</button>
      </form>
    </div>
  </section>

  <!-- GAME SELECTION -->
  <section id="gamesPage" class="games-section hidden">
    <button class="menu-btn" onclick="showLanding()">‚Üê Menu</button>
    
    <div class="container">
      <div class="games-header">
        <h2>Choose Your Game</h2>
        <p class="user-greeting">Welcome back, <span id="displayUsername">Player</span>!</p>
        <div class="user-stats">
          <div class="stat">
            <div class="stat-value" id="totalWins">0</div>
            <div class="stat-label">Wins</div>
          </div>
          <div class="stat">
            <div class="stat-value" id="totalPlays">0</div>
            <div class="stat-label">Games</div>
          </div>
          <div class="stat">
            <div class="stat-value" id="totalClicks">0</div>
            <div class="stat-label">Link Clicks</div>
          </div>
        </div>
      </div>
      
      <div class="games-grid" id="gamesList"></div>
    </div>
  </section>

  <!-- ACTIVE GAME -->
  <section id="activePage" class="game-active hidden">
    <button class="menu-btn" onclick="forfeitGame()">‚Üê Exit</button>
    
    <div class="game-header">
      <h1 class="game-title" id="activeGameName">Game</h1>
      <div class="game-timer" id="activeTimer">30s</div>
      <p class="game-instruction" id="activeInstruction"></p>
    </div>
    
    <div class="game-area" id="gameArea"></div>
    
    <div class="players-live">
      <h4>Playing Now:</h4>
      <p id="livePlayers"></p>
    </div>
  </section>

  <!-- WINNER SCREEN -->
  <section id="winnerPage" class="winner-section hidden">
    <h1 class="winner-title" id="winnerTitle">üéâ WINNER! üéâ</h1>
    
    <div class="winner-link-box">
      <div class="winner-name" id="winnerName">PLAYER</div>
      <a href="#" id="winnerLinkHuge" class="huge-link" target="_blank">winner-link.com</a>
      <p class="auto-open-msg">‚úì Opening link now...</p>
    </div>
    
    <div class="final-scores">
      <h3>Final Rankings</h3>
      <div id="finalRankings"></div>
    </div>
    
    <div style="margin-top: 32px; display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;">
      <button class="btn btn-primary" onclick="playAgain()">Play Again</button>
      <button class="btn btn-secondary" onclick="showGames()">Choose Game</button>
      <button class="btn btn-secondary" onclick="showLanding()">Home</button>
    </div>
  </section>

  <!-- LEADERBOARD -->
  <section id="leaderboardPage" class="leaderboard-section">
    <div class="container">
      <h2>üèÜ Top 20 Winners</h2>
      <div class="leaderboard-list" id="leaderboardList"></div>
    </div>
  </section>

  <!-- FOOTER - JEFF PROMO -->
  <footer class="footer">
    <div class="jeff-promo">
      <div class="jeff-badge">Featured Creator</div>
      <h3 class="jeff-title">Jeff the Robot Wizard</h3>
      <p class="jeff-description">
        Made with üíô by creators, for creators. <br>
        Check out the indie comic from a real creator!
      </p>
      <a href="https://linktr.ee/JeffTheRobotWizard" target="_blank" class="jeff-link">
        Read Jeff the Robot Wizard
      </a>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; 2025 Play to Promote. For creators, by creators.</p>
    </div>
  </footer>

  <script>
    // GAME STATE
    const playerData = {
      username: '',
      link: '',
      totalWins: 0,
      totalPlays: 0,
      linkClicks: 0
    };
    
    let leaderboard = [
      { username: 'Stratashi', link: 'https://linktr.ee/JeffTheRobotWizard', wins: 15, clicks: 42, plays: 20 },
      { username: 'Creator123', link: 'https://example.com/comic', wins: 12, clicks: 35, plays: 18 },
      { username: 'ArtistPro', link: 'https://shop.example.com', wins: 8, clicks: 24, plays: 15 },
      { username: 'DevMaster', link: 'https://github.com/devmaster', wins: 5, clicks: 15, plays: 12 }
    ];
    
    const GAMES = [
      { id: 'reaction', name: 'Reaction Blitz', icon: '‚ö°', desc: 'First to click when green!', duration: 10 },
      { id: 'memory', name: 'Memory Flip', icon: 'üé¥', desc: 'Match all pairs first!', duration: 30 },
      { id: 'rps', name: 'Rock Paper Scissors', icon: '‚úä', desc: 'Best of 5!', duration: 30 },
      { id: 'coin', name: 'Coin Flip', icon: 'ü™ô', desc: 'Best of 5!', duration: 20 },
      { id: 'math', name: 'Quick Math', icon: 'üî¢', desc: 'First to solve 5!', duration: 30 },
      { id: 'color', name: 'Color Match', icon: 'üé®', desc: 'First to get 5!', duration: 30 },
      { id: 'emoji', name: 'Emoji Guess', icon: 'üòÄ', desc: 'First to get 3!', duration: 20 },
      { id: 'number', name: 'Number Tap', icon: 'üî¢', desc: 'Tap 1-9 fastest!', duration: 30 },
      { id: 'clicker', name: 'Fast Clicker', icon: 'üëÜ', desc: 'Most clicks in 5s!', duration: 5 }
    ];
    
    let currentGame = null;
    let gameState = {};
    let gameTimer = null;
    let opponentName = '';
    let opponentLink = '';
    
    // NAVIGATION
    function showSection(sectionId) {
      document.querySelectorAll('section').forEach(s => {
        if (s.id === sectionId || s.id === 'leaderboardPage' || s.id.includes('footer')) {
          s.classList.remove('hidden');
        } else {
          s.classList.add('hidden');
        }
      });
      window.scrollTo(0, 0);
    }
    
    function showLanding() {
      showSection('landingPage');
      renderLeaderboard();
    }
    
    function showEntry() {
      showSection('entryPage');
    }
    
    function showGames() {
      showSection('gamesPage');
      updateStats();
      renderGames();
    }
    
    function submitEntry(e) {
      e.preventDefault();
      const username = document.getElementById('username').value.trim();
      const link = document.getElementById('promoLink').value.trim();
      
      if (username.length < 3 || username.length > 20) {
        alert('Username must be 3-20 characters');
        return;
      }
      
      if (!/^https?:\/\/.+/.test(link)) {
        alert('Please enter a valid URL');
        return;
      }
      
      playerData.username = username;
      playerData.link = link;
      
      document.getElementById('displayUsername').textContent = username;
      showGames();
    }
    
    function updateStats() {
      document.getElementById('totalWins').textContent = playerData.totalWins;
      document.getElementById('totalPlays').textContent = playerData.totalPlays;
      document.getElementById('totalClicks').textContent = playerData.linkClicks;
    }
    
    function renderGames() {
      const list = document.getElementById('gamesList');
      list.innerHTML = GAMES.map(game => `
        <div class="game-card" onclick="startGame('${game.id}')">
          <div class="game-icon">${game.icon}</div>
          <div class="game-name">${game.name}</div>
          <p class="game-desc">${game.desc}</p>
        </div>
      `).join('');
    }
    
    function renderLeaderboard() {
      const list = document.getElementById('leaderboardList');
      const sorted = [...leaderboard].sort((a, b) => b.wins - a.wins).slice(0, 20);
      
      list.innerHTML = sorted.map((player, i) => `
        <div class="leaderboard-item">
          <div class="lb-rank">#${i + 1}</div>
          <div>
            <div class="lb-username">${player.username}</div>
            <a href="${player.link}" target="_blank" class="lb-link">${player.link}</a>
          </div>
          <div class="lb-stat">${player.wins} wins</div>
          <div class="lb-stat">${player.clicks} clicks</div>
          <div class="lb-stat">${player.plays} plays</div>
        </div>
      `).join('');
    }
    
    // GAME ENGINE
    function startGame(gameId) {
      currentGame = GAMES.find(g => g.id === gameId);
      showSection('activePage');
      
      document.getElementById('activeGameName').textContent = currentGame.name;
      document.getElementById('activeInstruction').textContent = currentGame.desc;
      
      // Generate opponent
      const names = ['Alex', 'Jordan', 'Taylor', 'Casey', 'Morgan'];
      opponentName = names[Math.floor(Math.random() * names.length)];
      opponentLink = `https://example.com/${opponentName.toLowerCase()}`;
      
      document.getElementById('livePlayers').textContent = `${playerData.username}, ${opponentName}`;
      
      gameState = {
        timeLeft: currentGame.duration,
        playerScore: 0,
        opponentScore: 0,
        finished: false
      };
      
      // Start game logic
      initGame(gameId);
      startTimer();
    }
    
    function startTimer() {
      gameTimer = setInterval(() => {
        if (gameState.finished) {
          clearInterval(gameTimer);
          return;
        }
        
        gameState.timeLeft--;
        document.getElementById('activeTimer').textContent = gameState.timeLeft + 's';
        
        // Simulate opponent score
        if (Math.random() < 0.2) {
          gameState.opponentScore += Math.floor(Math.random() * 10) + 5;
        }
        
        if (gameState.timeLeft <= 0) {
          endGame();
        }
      }, 1000);
    }
    
    function initGame(gameId) {
      const area = document.getElementById('gameArea');
      
      switch(gameId) {
        case 'reaction':
          initReaction(area);
          break;
        case 'memory':
          initMemory(area);
          break;
        case 'rps':
          initRPS(area);
          break;
        case 'coin':
          initCoin(area);
          break;
        case 'math':
          initMath(area);
          break;
        case 'color':
          initColor(area);
          break;
        case 'emoji':
          initEmoji(area);
          break;
        case 'number':
          initNumber(area);
          break;
        case 'clicker':
          initClicker(area);
          break;
      }
    }
    
    // GAME IMPLEMENTATIONS
    function initReaction(area) {
      area.innerHTML = '<div style="font-size: 48px; color: #ff3333;">Wait...</div>';
      area.style.background = '#ff3333';
      
      const waitTime = 1000 + Math.random() * 2000;
      setTimeout(() => {
        const startTime = Date.now();
        area.innerHTML = '<div style="font-size: 48px; color: #00ff88;">CLICK NOW!</div>';
        area.style.background = '#00ff88';
        area.style.cursor = 'pointer';
        
        area.onclick = () => {
          const time = Date.now() - startTime;
          gameState.playerScore += Math.max(0, 200 - time);
          area.innerHTML = `<div style="font-size: 36px;">${time}ms<br>+${Math.max(0, 200 - time)} pts</div>`;
          area.style.background = 'rgba(20, 20, 40, 0.95)';
          area.onclick = null;
          
          // Finish early
          setTimeout(() => {
            gameState.finished = true;
            endGame();
          }, 1000);
        };
      }, waitTime);
    }
    
    function initMemory(area) {
      const emojis = ['üéÆ', '‚ö°', 'üéØ', 'üé≤', 'üé™', 'üé®'];
      const cards = [...emojis, ...emojis].sort(() => Math.random() - 0.5);
      let flipped = [];
      let matched = [];
      
      area.innerHTML = `<div style="display: grid; grid-template-columns: repeat(4, 80px); gap: 12px;">${
        cards.map((e, i) => `<div onclick="flipCard(${i})" id="card-${i}" style="width: 80px; height: 80px; background: rgba(0,255,255,0.1); border: 2px solid #00ffff; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 32px; cursor: pointer;">‚ùì</div>`).join('')
      }</div>`;
      
      window.flipCard = (i) => {
        if (flipped.length >= 2 || flipped.includes(i) || matched.includes(i)) return;
        
        const card = document.getElementById(`card-${i}`);
        card.textContent = cards[i];
        flipped.push(i);
        
        if (flipped.length === 2) {
          const [a, b] = flipped;
          if (cards[a] === cards[b]) {
            matched.push(a, b);
            gameState.playerScore += 50;
            flipped = [];
            
            if (matched.length === cards.length) {
              gameState.finished = true;
              setTimeout(() => endGame(), 500);
            }
          } else {
            setTimeout(() => {
              document.getElementById(`card-${a}`).textContent = '‚ùì';
              document.getElementById(`card-${b}`).textContent = '‚ùì';
              flipped = [];
            }, 800);
          }
        }
      };
    }
    
    function initRPS(area) {
      let round = 0;
      let playerWins = 0;
      let opponentWins = 0;
      
      function nextRound() {
        if (round >= 5) return;
        round++;
        
        area.innerHTML = `
          <p style="font-size: 24px; margin-bottom: 24px;">Round ${round}/5 - You: ${playerWins} | Opp: ${opponentWins}</p>
          <div style="display: flex; gap: 16px; justify-content: center;">
            <button class="btn btn-primary" onclick="playRPS('rock')">‚úä Rock</button>
            <button class="btn btn-primary" onclick="playRPS('paper')">‚úã Paper</button>
            <button class="btn btn-primary" onclick="playRPS('scissors')">‚úåÔ∏è Scissors</button>
          </div>
        `;
      }
      
      window.playRPS = (choice) => {
        const choices = ['rock', 'paper', 'scissors'];
        const opp = choices[Math.floor(Math.random() * 3)];
        const icons = { rock: '‚úä', paper: '‚úã', scissors: '‚úåÔ∏è' };
        
        let result = '';
        if (choice === opp) result = 'Draw!';
        else if ((choice === 'rock' && opp === 'scissors') || (choice === 'scissors' && opp === 'paper') || (choice === 'paper' && opp === 'rock')) {
          result = 'You Win!';
          playerWins++;
          gameState.playerScore += 100;
        } else {
          result = 'You Lose!';
          opponentWins++;
        }
        
        area.innerHTML = `
          <div style="font-size: 72px; margin: 32px 0;">${icons[choice]} vs ${icons[opp]}</div>
          <div style="font-size: 36px; color: #00ffff; margin-bottom: 24px;">${result}</div>
          <button class="btn btn-primary" onclick="continueRPS()">Next Round</button>
        `;
      };
      
      window.continueRPS = () => {
        if (round < 5) {
          nextRound();
        } else {
          gameState.finished = true;
          endGame();
        }
      };
      
      nextRound();
    }
    
    function initCoin(area) {
      let flips = 0;
      
      function nextFlip() {
        if (flips >= 5) {
          gameState.finished = true;
          endGame();
          return;
        }
        flips++;
        
        area.innerHTML = `
          <p style="font-size: 24px; margin-bottom: 24px;">Flip ${flips}/5</p>
          <div style="display: flex; gap: 16px;">
            <button class="btn btn-primary" onclick="flipCoin('heads')">ü™ô Heads</button>
            <button class="btn btn-primary" onclick="flipCoin('tails')">ü™ô Tails</button>
          </div>
        `;
      }
      
      window.flipCoin = (guess) => {
        const result = Math.random() < 0.5 ? 'heads' : 'tails';
        const correct = guess === result;
        
        if (correct) gameState.playerScore += 50;
        
        area.innerHTML = `
          <div style="font-size: 72px; margin: 32px 0;">${result === 'heads' ? 'üëë' : 'ü¶Ö'}</div>
          <div style="font-size: 32px; color: ${correct ? '#00ff88' : '#ff3333'}; margin-bottom: 24px;">
            ${result.toUpperCase()} - ${correct ? 'Correct! +50' : 'Wrong!'}
          </div>
          <button class="btn btn-primary" onclick="nextCoinFlip()">Next Flip</button>
        `;
      };
      
      window.nextCoinFlip = () => nextFlip();
      nextFlip();
    }
    
    function initMath(area) {
      let solved = 0;
      
      function nextProblem() {
        if (solved >= 5) {
          gameState.finished = true;
          endGame();
          return;
        }
        
        const a = Math.floor(Math.random() * 20) + 1;
        const b = Math.floor(Math.random() * 20) + 1;
        const ops = ['+', '-', '*'];
        const op = ops[Math.floor(Math.random() * ops.length)];
        
        let answer;
        if (op === '+') answer = a + b;
        else if (op === '-') answer = a - b;
        else answer = a * b;
        
        const wrong = answer + (Math.random() < 0.5 ? Math.floor(Math.random() * 5) + 1 : -(Math.floor(Math.random() * 5) + 1));
        const choices = Math.random() < 0.5 ? [answer, wrong] : [wrong, answer];
        
        area.innerHTML = `
          <div style="font-size: 48px; margin-bottom: 32px; color: #00ffff;">${a} ${op} ${b} = ?</div>
          <p style="margin-bottom: 16px;">Solved: ${solved}/5</p>
          <div style="display: flex; gap: 16px;">
            <button class="btn btn-primary" onclick="checkMath(${choices[0]}, ${answer})" style="font-size: 28px; padding: 16px 32px;">${choices[0]}</button>
            <button class="btn btn-primary" onclick="checkMath(${choices[1]}, ${answer})" style="font-size: 28px; padding: 16px 32px;">${choices[1]}</button>
          </div>
        `;
      }
      
      window.checkMath = (choice, correct) => {
        if (choice === correct) {
          solved++;
          gameState.playerScore += 20;
        }
        nextProblem();
      };
      
      nextProblem();
    }
    
    function initColor(area) {
      let correct = 0;
      
      function nextRound() {
        if (correct >= 5) {
          gameState.finished = true;
          endGame();
          return;
        }
        
        const colors = ['red', 'blue', 'green', 'yellow', 'purple', 'orange'];
        const words = ['RED', 'BLUE', 'GREEN', 'YELLOW', 'PURPLE', 'ORANGE'];
        const wordIdx = Math.floor(Math.random() * colors.length);
        const colorIdx = Math.floor(Math.random() * colors.length);
        
        area.innerHTML = `
          <div style="font-size: 64px; font-weight: bold; color: ${colors[colorIdx]}; margin: 32px 0;">${words[wordIdx]}</div>
          <p style="margin-bottom: 16px;">Match the WORD (not color): ${correct}/5</p>
          <div style="display: flex; gap: 12px; justify-content: center;">
            ${colors.map(c => `<div onclick="checkColor('${c}', '${colors[wordIdx]}')" style="width: 60px; height: 60px; background: ${c}; border: 3px solid white; border-radius: 8px; cursor: pointer;"></div>`).join('')}
          </div>
        `;
      }
      
      window.checkColor = (choice, answer) => {
        if (choice === answer) {
          correct++;
          gameState.playerScore += 30;
        }
        setTimeout(nextRound, 200);
      };
      
      nextRound();
    }
    
    function initEmoji(area) {
      let correct = 0;
      const emojis = ['üòÄ', 'üòé', 'ü•≥', 'üòç', 'ü§î', 'üò¥', 'ü§Ø', 'ü•∂', 'ü§†', 'üëª', 'üëΩ', 'ü§ñ'];
      
      function nextRound() {
        if (correct >= 3) {
          gameState.finished = true;
          endGame();
          return;
        }
        
        const seq = [];
        while (seq.length < 3) {
          const e = emojis[Math.floor(Math.random() * emojis.length)];
          if (!seq.includes(e)) seq.push(e);
        }
        
        const hideIdx = Math.floor(Math.random() * 3);
        const hidden = seq[hideIdx];
        
        const choices = [hidden];
        while (choices.length < 3) {
          const e = emojis[Math.floor(Math.random() * emojis.length)];
          if (!choices.includes(e) && !seq.includes(e)) choices.push(e);
        }
        choices.sort(() => Math.random() - 0.5);
        
        area.innerHTML = `
          <div style="font-size: 48px; margin: 32px 0;">${seq.map((e, i) => i === hideIdx ? '‚ùì' : e).join(' ')}</div>
          <p style="margin-bottom: 16px;">Which is missing? ${correct}/3</p>
          <div style="display: flex; gap: 12px; justify-content: center;">
            ${choices.map(e => `<div onclick="checkEmoji('${e}', '${hidden}')" style="font-size: 48px; cursor: pointer; padding: 12px; border: 2px solid #00ffff; border-radius: 8px;">${e}</div>`).join('')}
          </div>
        `;
      }
      
      window.checkEmoji = (choice, answer) => {
        if (choice === answer) {
          correct++;
          gameState.playerScore += 40;
        }
        setTimeout(nextRound, 200);
      };
      
      nextRound();
    }
    
    function initNumber(area) {
      let current = 1;
      const startTime = Date.now();
      const numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9].sort(() => Math.random() - 0.5);
      
      area.innerHTML = `
        <p style="font-size: 24px; margin-bottom: 24px;">Tap in order: <span style="color: #00ffff;">${current}</span></p>
        <div style="display: grid; grid-template-columns: repeat(3, 80px); gap: 12px; justify-content: center;">
          ${numbers.map(n => `<button id="num-${n}" onclick="tapNumber(${n})" class="btn btn-primary" style="width: 80px; height: 80px; font-size: 32px; padding: 0;">${n}</button>`).join('')}
        </div>
      `;
      
      window.tapNumber = (n) => {
        if (n === current) {
          document.getElementById(`num-${n}`).style.background = '#00ff88';
          current++;
          
          if (current > 9) {
            const time = ((Date.now() - startTime) / 1000).toFixed(2);
            gameState.playerScore += Math.max(0, 500 - Math.floor(parseFloat(time) * 10));
            gameState.finished = true;
            area.innerHTML = `<div style="font-size: 48px;">Complete!<br>${time}s<br>+${gameState.playerScore} pts</div>`;
            setTimeout(() => endGame(), 1000);
          } else {
            area.querySelector('span').textContent = current;
          }
        }
      };
    }
    
    function initClicker(area) {
      let clicks = 0;
      
      area.innerHTML = `
        <div style="font-size: 64px; font-weight: bold; margin-bottom: 32px; color: #00ffff;" id="clickCount">0</div>
        <div onclick="incrementClicks()" style="width: 100%; height: 200px; background: rgba(255, 102, 0, 0.1); border: 3px dashed #ff6600; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 32px; cursor: pointer; user-select: none;">CLICK FAST!</div>
      `;
      
      window.incrementClicks = () => {
        clicks++;
        document.getElementById('clickCount').textContent = clicks;
        gameState.playerScore = clicks * 10;
      };
    }
    
    function endGame() {
      if (gameTimer) clearInterval(gameTimer);
      playerData.totalPlays++;
      
      // Simulate final opponent score
      gameState.opponentScore += Math.floor(Math.random() * 50);
      
      const playerWon = gameState.playerScore > gameState.opponentScore;
      const winner = playerWon ? playerData.username : opponentName;
      const winnerLink = playerWon ? playerData.link : opponentLink;
      
      if (playerWon) {
        playerData.totalWins++;
        playerData.linkClicks++;
      }
      
      // Show winner
      showWinner(winner, winnerLink, playerWon);
    }
    
    function showWinner(name, link, isPlayer) {
      showSection('winnerPage');
      
      document.getElementById('winnerTitle').textContent = isPlayer ? 'üéâ YOU WON! üéâ' : 'üèÜ ' + name + ' WINS! üèÜ';
      document.getElementById('winnerName').textContent = name.toUpperCase();
      document.getElementById('winnerLinkHuge').textContent = link;
      document.getElementById('winnerLinkHuge').href = link;
      
      // AUTO-OPEN WINNER'S LINK (KEY FEATURE)
      setTimeout(() => {
        window.open(link, '_blank');
      }, 1000);
      
      // Show rankings
      const rankings = document.getElementById('finalRankings');
      const players = [
        { name: playerData.username, score: gameState.playerScore, isPlayer: true },
        { name: opponentName, score: gameState.opponentScore, isPlayer: false }
      ].sort((a, b) => b.score - a.score);
      
      rankings.innerHTML = players.map((p, i) => `
        <div class="score-item ${i === 0 ? 'winner' : ''}" style="${p.isPlayer ? 'border-color: #00ffff;' : ''}">
          <span style="font-weight: bold;">#${i + 1} ${p.name}</span>
          <span style="color: #ff6600; font-weight: bold;">${p.score} pts</span>
        </div>
      `).join('');
      
      updateStats();
    }
    
    function forfeitGame() {
      if (confirm('Forfeit this game?')) {
        if (gameTimer) clearInterval(gameTimer);
        showGames();
      }
    }
    
    function playAgain() {
      startGame(currentGame.id);
    }
    
    // INIT
    window.onload = () => {
      showLanding();
    };
  </script>
</body>
</html>